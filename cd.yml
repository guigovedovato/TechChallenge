trigger: none
pr: none

resources:
  pipelines:
    - pipeline: ciPipeline
      source: CI
      trigger:
        branches:
          include:
            - main

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: AzureContainerApps@1
  inputs:
    appSourcePath: '.'
    azureSubscription: 'Azure for Students($(subscription))'
    acrName: '$(acrName)'
    acrUsername: '$(acrUsername)'
    location: '$(location)'
    acrPassword: '$(acrPassword)'
    imageToDeploy: '$(acrLoginServer)/$(acrName):$(resources.pipeline.ciPipeline.runID)'
    containerAppName: '$(appName)'
    resourceGroup: '$(resourceGroup)'
    targetPort: '8080'
  displayName: 'Construir e Rodar o Contêiner Docker com a Aplicação .NET'