trigger: none
pr: none

resources:
  pipelines:
    - pipeline: ciPipeline
      source: CI
      trigger:
        branches:
          include:
            - main

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: AzureContainerApps@1
  inputs:
    appSourcePath: '.'
    azureSubscription: 'Azure for Students Starter(e090b450-f938-4fe1-8405-016ce7e6bb16)'
    acrName: '$(acrName)'
    acrUsername: '$(acrUsername)'
    acrPassword: '$(acrPassword)'
    imageToDeploy: '$(acrLoginServer)/$(acrName):$(resources.pipeline.ciPipeline.runID)'
    containerAppName: '$(appName)'
    resourceGroup: '$(resourceGroup)'
    targetPort: '8080'