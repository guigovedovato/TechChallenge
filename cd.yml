trigger: none
pr: none

resources:
  pipelines:
    - pipeline: ciPipeline
      source: CI
      trigger:
        branches:
          include:
            - main

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: AzureContainerApps@1
  inputs:
    appSourcePath: '.'
    azureSubscription: 'Azure for Students(07de936b-e0c8-47b8-b15f-3d778712ecb6)'
    acrName: '$(acrName)'
    acrUsername: '$(acrUsername)'
    location: 'East Us'
    acrPassword: '$(acrPassword)'
    imageToDeploy: '$(acrLoginServer)/$(acrName):$(resources.pipeline.ciPipeline.runID)'
    containerAppName: '$(appName)'
    resourceGroup: '$(resourceGroup)'
    targetPort: '8080'